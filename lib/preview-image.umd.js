(function(w,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(w=typeof globalThis<"u"?globalThis:w||self,e(w.foxPreviewImage={},w.Vue))})(this,function(w,e){"use strict";function y(t){return Object.prototype.toString.call(t).replace(new RegExp("(^[[a-z]+ )([A-Za-z]+)(])","g"),"$2").toLowerCase()}const k=Object.create(null);function z(t){return y(t)==="object"}function M(t){return y(t)==="function"}function N(t){return y(t)==="array"}function F(t){return y(t)==="symbol"}function I(t){return[0,void 0,null].includes(t)}k.isObject=z,k.isFunction=M,k.isArray=N,k.isSymbol=F,k.isFalse=I,y.prototype=k;const De="",p=(t,o)=>{const f=t.__vccOpts||t;for(const[h,v]of o)f[h]=v;return f},R={},L={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",class:"svg","aria-role":"button"},S=[e.createElementVNode("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704zM352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64z"},null,-1)];function D(t,o){return e.openBlock(),e.createElementBlock("svg",L,S)}const O=p(R,[["render",D]]),Ae="",A={},j={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",class:"svg","aria-role":"button"},T=[e.createElementVNode("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704zm-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64h96z"},null,-1)];function Z(t,o){return e.openBlock(),e.createElementBlock("svg",j,T)}const H=p(A,[["render",Z]]),Te="",P={},W={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",class:"svg","aria-role":"button"},q=[e.createElementVNode("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"},null,-1)];function X(t,o){return e.openBlock(),e.createElementBlock("svg",W,q)}const Y=p(P,[["render",X]]),He="",K={},U={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",class:"svg","aria-role":"button"},G=[e.createElementVNode("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"},null,-1)];function J(t,o){return e.openBlock(),e.createElementBlock("svg",U,G)}const Q=p(K,[["render",J]]),We="",ee={},te={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",class:"svg","aria-role":"button"},oe=[e.createElementVNode("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"},null,-1)];function le(t,o){return e.openBlock(),e.createElementBlock("svg",te,oe)}const ne=p(ee,[["render",le]]),Xe="",se={},ae={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",class:"svg","aria-role":"button"},re=[e.createElementVNode("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"},null,-1)];function ie(t,o){return e.openBlock(),e.createElementBlock("svg",ae,re)}const ce=p(se,[["render",ie]]),Ke="",de={},ue={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",class:"svg","aria-role":"button"},me=[e.createElementVNode("path",{fill:"currentColor",d:"M160 832h704a32 32 0 1 1 0 64H160a32 32 0 1 1 0-64zm384-253.696 236.288-236.352 45.248 45.248L508.8 704 192 387.2l45.248-45.248L480 584.704V128h64v450.304z"},null,-1)];function _e(t,o){return e.openBlock(),e.createElementBlock("svg",ue,me)}const we=p(de,[["render",_e]]),Ge="",pe=e.defineComponent({name:"FoxPreviewImage",components:{ZoomOut:O,ZoomIn:H,RotateLeft:Q,RotateRight:ne,Close:Y,ArrowRight:ce,Download:we},props:{modelValue:{type:Boolean,default:!1},src:{type:[String,Array],required:!0},zIndex:{type:Number,default:9e3},initialIndex:{type:Number,default:0}},setup(t,{emit:o}){const f=e.ref(null);let h=e.ref(!1),v=e.ref(0),s=t.src&&t.src.length?e.ref(t.initialIndex):e.ref(0),c=e.ref(0),a=e.ref(1),d=e.ref(0),u=e.ref(0),m=e.ref(0),_=e.ref(0),r=e.ref([]),n=e.reactive({x:0,y:0});const $=()=>{h.value=t.modelValue},g=()=>{h.value=!1,o("update:modelValue",h.value)},$e=l=>{if(v.value===1){const{x:i,y:E}=l,C=i-n.x,x=E-n.y;m.value=C+m.value-d.value,_.value=x+_.value-u.value,requestAnimationFrame(()=>{d.value=C,u.value=x})}},V=()=>{a.value>.5&&(a.value-=.1)},b=()=>{a.value<2&&(a.value+=.1)},Ce=l=>{requestAnimationFrame(()=>{(l.wheelDelta||l.detail*-40)>0?b():V()})},xe=$e,Be=Ce,Ee=()=>{v.value=0,d.value=0,u.value=0},Ve=l=>{v.value=1,n={x:l.x,y:l.y}},be=()=>{c.value+=90},ze=()=>{c.value-=90},Me=()=>{const l=r.value[s.value],i=document.createElement("a");i.download=l.split("/").at(-1),i.href=l,i.click(),i.remove()},Ne=()=>{const l=document.createElement("div"),i=document.createElement("div");l.appendChild(i),l.style.width="100px",l.style.height="50px",l.style.overflow="scroll",l.style.marginLeft="-100000px",document.body.appendChild(l);const E=i.offsetWidth,C=l.offsetWidth,x=setTimeout(()=>{document.body.removeChild(l),clearTimeout(x)},10);return C-E},Fe=()=>{const l=r.value.length||0;s.value>0?s.value--:s.value=l-1,c.value=0,a.value=1,m.value=0,_.value=0,n.x=0,n.y=0,d.value=0,u.value=0},Ie=()=>{const l=r.value.length||0;s.value<l-1?s.value++:s.value=0,c.value=0,a.value=1,m.value=0,_.value=0,n.x=0,n.y=0,d.value=0,u.value=0},Re=e.computed(()=>parseFloat(a.value.toFixed(1))),Le=e.computed(()=>`${s.value+1}/${r.value.length}`);e.onMounted(()=>{$()});const Se=l=>l.scrollHeight>window.innerHeight;return e.watchEffect(()=>{h.value=t.modelValue,t.modelValue?(f.value!==null&&f.value.focus(),Se(document.body)&&(document.body.style.paddingRight=Ne()+"px",document.body.classList.add("fox-lock-window"))):(document.body.classList.remove("fox-lock-window"),document.body.style.paddingRight="0px")}),e.watchEffect(()=>{const l=y(t.src);l==="string"?(s.value=0,c.value=0,a.value=1,m.value=0,_.value=0,n.x=0,n.y=0,d.value=0,u.value=0,r.value=[t.src]):l==="array"&&(t.initialIndex>=0&&t.initialIndex<t.src.length?s.value=t.initialIndex:s.value=0,r.value=t.src,c.value=0,a.value=1,m.value=0,_.value=0,n.x=0,n.y=0,d.value=0,u.value=0,r.value=t.src)}),{refEl:f,flag:h,status:v,active:s,uri:r,scale:a,angle:c,x:m,y:_,handleMouseMove:xe,handleMousewheel:Be,close:g,prev:Fe,next:Ie,mouseup:Ee,mousedown:Ve,zoomOut:V,enlarge:b,anticlockwiseRotation:ze,clockwiseRotation:be,getCurrScale:Re,getCurrIndex:Le,downloadFile:Me}}}),fe=["src"],he=["textContent"],ve=["textContent"];function ge(t,o,f,h,v,s){const c=e.resolveComponent("Close"),a=e.resolveComponent("ArrowRight"),d=e.resolveComponent("ZoomOut"),u=e.resolveComponent("ZoomIn"),m=e.resolveComponent("RotateLeft"),_=e.resolveComponent("RotateRight"),r=e.resolveComponent("Download");return e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.createVNode(e.Transition,null,{default:e.withCtx(()=>[t.flag?(e.openBlock(),e.createElementBlock("div",{key:0,ref:"refEl",class:"owl-preview",style:e.normalizeStyle({"z-index":t.zIndex}),tabindex:"1",onKeyup:o[8]||(o[8]=e.withKeys(e.withModifiers((...n)=>t.close&&t.close(...n),["exact"]),["esc"]))},[e.createElementVNode("div",{class:"owl-preview-canvas",onMousewheel:o[3]||(o[3]=(...n)=>t.handleMousewheel&&t.handleMousewheel(...n)),onDOMMouseScroll:o[4]||(o[4]=(...n)=>t.handleMousewheel&&t.handleMousewheel(...n))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.uri,(n,$)=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:$},[t.active===$?(e.openBlock(),e.createElementBlock("div",{key:0,onMousemove:o[0]||(o[0]=(...g)=>t.handleMouseMove&&t.handleMouseMove(...g)),onMouseup:o[1]||(o[1]=(...g)=>t.mouseup&&t.mouseup(...g)),onMousedown:o[2]||(o[2]=(...g)=>t.mousedown&&t.mousedown(...g)),style:e.normalizeStyle([{transform:`rotate(${t.angle}deg) scale(${t.scale}) translate(${t.x}px,${t.y}px)`},{display:"inline-block"}])},[e.createElementVNode("img",{class:"owl-preview-image",src:n,alt:"\u88AB\u62D6\u62FD\u7684\u56FE\u7247",draggable:"false"},null,8,fe)],36)):e.createCommentVNode("",!0)],64))),128))],32),e.createElementVNode("div",{class:"owl-preview-close",style:e.normalizeStyle({"z-index":t.zIndex+1}),onClick:o[5]||(o[5]=(...n)=>t.close&&t.close(...n))},[e.createVNode(c)],4),t.uri&&t.uri.length>1?(e.openBlock(),e.createElementBlock("div",{key:0,class:"owl-preview-operate",style:e.normalizeStyle({"z-index":t.zIndex+1})},[e.createElementVNode("div",{class:"owl-preview-operate-item owl-preview-operate-item-left",onClick:o[6]||(o[6]=(...n)=>t.prev&&t.prev(...n))},[e.createVNode(a,{class:"owl-preview-operate-icon owl-preview-operate-icon-left"})]),e.createElementVNode("div",{class:"owl-preview-operate-item",onClick:o[7]||(o[7]=(...n)=>t.next&&t.next(...n))},[e.createVNode(a,{class:"owl-preview-operate-icon owl-preview-operate-icon"})])],4)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"owl-preview-utils",style:e.normalizeStyle({"z-index":t.zIndex+1})},[e.createVNode(d,{title:"\u7F29\u5C0F",class:"owl-preview-utils-item",onClick:t.zoomOut},null,8,["onClick"]),e.createVNode(u,{title:"\u653E\u5927",class:"owl-preview-utils-item",onClick:t.enlarge},null,8,["onClick"]),e.createElementVNode("div",{title:"\u7F29\u653E\u500D\u6570",tabindex:"-1",class:"owl-preview-utils-item owl-preview-utils-scale",textContent:e.toDisplayString(t.getCurrScale)},null,8,he),t.uri&&t.uri.length>1?(e.openBlock(),e.createElementBlock("div",{key:0,title:"\u56FE\u7247\u4F4D\u7F6E",class:"owl-preview-utils-item owl-preview-utils-position",textContent:e.toDisplayString(t.getCurrIndex)},null,8,ve)):e.createCommentVNode("",!0),e.createVNode(m,{title:"\u5DE6\u65CB\u8F6C",class:"owl-preview-utils-item",onClick:t.clockwiseRotation},null,8,["onClick"]),e.createVNode(_,{title:"\u53F3\u65CB\u8F6C",class:"owl-preview-utils-item",onClick:t.anticlockwiseRotation},null,8,["onClick"]),e.createVNode(r,{title:"\u4E0B\u8F7D/\u4FDD\u5B58",class:"owl-preview-utils-item",onClick:t.downloadFile},null,8,["onClick"])],4)],36)):e.createCommentVNode("",!0)]),_:1})])}const B=p(pe,[["render",ge]]),ye=t=>{t.component(B.name,B)},ke=B;w.FoxPreviewImage=ke,w.default=ye,Object.defineProperties(w,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
