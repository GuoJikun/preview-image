(function(c,e){typeof exports=="object"&&typeof module!="undefined"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(c=typeof globalThis!="undefined"?globalThis:c||self,e(c.foxPreviewImage={},c.Vue))})(this,function(c,e){"use strict";function f(t){return Object.prototype.toString.call(t).replace(new RegExp("(^[[a-z]+ )([A-Za-z]+)(])","g"),"$2").toLowerCase()}const v=Object.create(null);function M(t){return f(t)==="object"}function z(t){return f(t)==="function"}function b(t){return f(t)==="array"}function C(t){return f(t)==="symbol"}function x(t){return[0,void 0,null].includes(t)}v.isObject=M,v.isFunction=z,v.isArray=b,v.isSymbol=C,v.isFalse=x,f.prototype=v;var ae="",S=(t,l)=>{const i=t.__vccOpts||t;for(const[u,s]of l)i[u]=s;return i};const F=e.defineComponent({name:"FoxPreviewImage",props:{modelValue:{type:Boolean,default:!1},src:[String,Array],zIndex:{type:Number,default:9e3}},setup(t,{emit:l}){let i=e.ref(!1),u=e.ref(0),s=e.ref(0),m=e.ref(0),o=e.ref(1),d=e.ref(0),a=e.ref(0),w=e.ref(0),p=e.ref(0),h=e.ref([]),r=e.reactive({x:0,y:0});const q=()=>{i.value=t.modelValue},X=()=>{i.value=!1,l("update:modelValue",i.value)},Y=n=>{if(u.value===1){const{x:g,y:k}=n,y=g-r.x,E=k-r.y;w.value=y+w.value-d.value,p.value=E+p.value-a.value,requestAnimationFrame(()=>{d.value=y,a.value=E})}},N=()=>{o.value>.5&&(o.value-=.1)},B=()=>{o.value<2&&(o.value+=.1)},U=n=>{requestAnimationFrame(()=>{(n.wheelDelta||n.detail*-40)>0?B():N()})},Z=Y,G=U,J=()=>{u.value=0,d.value=0,a.value=0},K=n=>{u.value=1,r={x:n.x,y:n.y}},Q=()=>{m.value+=90},ee=()=>{m.value-=90},te=()=>{const n=document.createElement("div"),g=document.createElement("div");n.appendChild(g),n.style.width="100px",n.style.height="50px",n.style.overflow="scroll",n.style.marginLeft="-100000px",document.body.appendChild(n);const k=g.offsetWidth,y=n.offsetWidth,E=setTimeout(()=>{document.body.removeChild(n),clearTimeout(E)},10);return y-k},oe=()=>{const n=h.value.length||0;s.value>0?s.value--:s.value=n-1,m.value=0,o.value=1,w.value=0,p.value=0,r.x=0,r.y=0,d.value=0,a.value=0},le=()=>{const n=h.value.length||0;s.value<n-1?s.value++:s.value=0,m.value=0,o.value=1,w.value=0,p.value=0,r.x=0,r.y=0,d.value=0,a.value=0},ne=e.computed(()=>parseFloat(o.value.toFixed(1)));return e.onMounted(()=>{q()}),e.watchEffect(()=>{i.value=t.modelValue,console.log(i.value),t.modelValue?(document.body.style.paddingRight=te()+"px",document.body.style.overflow="hidden"):document.body.setAttribute("style","")}),e.watchEffect(()=>{const n=f(t.src);s.value=0,n==="string"?(m.value=0,o.value=1,w.value=0,p.value=0,r.x=0,r.y=0,d.value=0,a.value=0,h.value=[t.src]):n==="array"&&(h.value=t.src,m.value=0,o.value=1,w.value=0,p.value=0,r.x=0,r.y=0,d.value=0,a.value=0,h.value=t.src)}),{flag:i,status:u,active:s,uri:h,scale:o,angle:m,x:w,y:p,handleMouseMove:Z,handleMousewheel:G,close:X,prev:oe,next:le,mouseup:J,mousedown:K,zoomOut:N,enlarge:B,anticlockwiseRotation:ee,clockwiseRotation:Q,getCurrScale:ne}}}),I=["src"],L=[e.createElementVNode("svg",{viewBox:"0 0 1024 1024","aria-hidden":"true",class:"font-svg"},[e.createElementVNode("use",{href:"#preview-image-close"})],-1)],A=[e.createElementVNode("svg",{viewBox:"0 0 1024 1024","aria-hidden":"true",class:"font-svg owl-preview-operate-icon owl-preview-operate-icon-left"},[e.createElementVNode("use",{href:"#preview-image-arrow-right"})],-1)],O=[e.createElementVNode("svg",{viewBox:"0 0 1024 1024","aria-hidden":"true",class:"font-svg owl-preview-operate-icon"},[e.createElementVNode("use",{href:"#preview-image-arrow-right"})],-1)],$=[e.createElementVNode("use",{href:"#preview-image-zoom-out"},null,-1)],T=[e.createElementVNode("use",{href:"#preview-image-zoom-in"},null,-1)],R=["innerHTML"],j=[e.createElementVNode("use",{href:"#preview-image-refresh-left"},null,-1)],P=[e.createElementVNode("use",{href:"#preview-image-refresh-right"},null,-1)],_=e.createElementVNode("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[e.createElementVNode("symbol",{id:"preview-image-close",viewBox:"0 0 1024 1024"},[e.createElementVNode("path",{d:"M559.78666667 512L853.33333333 218.45333333c13.65333333-13.65333333 13.65333333-34.13333333 0-47.78666666-13.65333333-13.65333333-34.13333333-13.65333333-47.78666666 0L512 464.21333333l-293.54666667-295.82222186c-13.65333333-13.65333333-34.13333333-13.65333333-47.78666666 0-13.65333333 13.65333333-13.65333333 34.13333333 0 47.78666666l293.54666666 295.82222187-295.82222186 293.54666667c-13.65333333 13.65333333-13.65333333 34.13333333 0 47.78666666 6.82666667 6.82666667 15.92888853 9.10222187 25.0311104 9.10222187s18.2044448-2.2755552 25.03111146-9.10222187L512 559.78666667 805.54666667 853.33333333c6.82666667 6.82666667 15.92888853 9.10222187 25.03111146 9.10222187s18.2044448-2.2755552 25.0311104-9.10222187c13.65333333-13.65333333 13.65333333-34.13333333 0-47.78666666L559.78666667 512z"})]),e.createElementVNode("symbol",{id:"preview-image-zoom-out",viewBox:"0 0 1024 1024"},[e.createElementVNode("path",{d:"M919.264 905.984l-138.912-138.912C851.808 692.32 896 591.328 896 480c0-229.376-186.624-416-416-416S64 250.624 64 480s186.624 416 416 416c95.008 0 182.432-32.384 252.544-86.208l141.44 141.44a31.904 31.904 0 0 0 45.248 0 32 32 0 0 0 0.032-45.248zM128 480C128 285.92 285.92 128 480 128s352 157.92 352 352-157.92 352-352 352S128 674.08 128 480z"}),e.createElementVNode("path",{d:"M625.792 448H336a32 32 0 0 0 0 64h289.792a32 32 0 1 0 0-64z"})]),e.createElementVNode("symbol",{id:"preview-image-zoom-in",viewBox:"0 0 1024 1024"},[e.createElementVNode("path",{d:"M919.264 905.984l-138.912-138.912C851.808 692.32 896 591.328 896 480c0-229.376-186.624-416-416-416S64 250.624 64 480s186.624 416 416 416c95.008 0 182.432-32.384 252.544-86.208l141.44 141.44a31.904 31.904 0 0 0 45.248 0 32 32 0 0 0 0.032-45.248zM128 480C128 285.92 285.92 128 480 128s352 157.92 352 352-157.92 352-352 352S128 674.08 128 480z"}),e.createElementVNode("path",{d:"M625.792 448H512v-112a32 32 0 0 0-64 0V448h-112a32 32 0 0 0 0 64H448v112a32 32 0 1 0 64 0V512h113.792a32 32 0 1 0 0-64z"})]),e.createElementVNode("symbol",{id:"preview-image-refresh-left",viewBox:"0 0 1024 1024"},[e.createElementVNode("path",{d:"M881.6703206 269.97378253a437.96818845 437.96818845 0 0 0-719.14189984-11.18481067V200.37940505a24.44088298 24.44088298 0 0 0-48.93354667 0v144.15978193c0 4.40143053 1.44988327 8.28504534 3.46936176 11.85796975a24.3373191 24.3373191 0 0 0 12.16866016 12.53113128c12.47934934 5.38527881 26.77105186 0 32.31167525-12.37578668a389.70780089 389.70780089 0 0 1 356.25693276-231.2045345 389.70780089 389.70780089 0 0 1 389.75958282 389.75958282c0 214.94513422-174.86622932 389.81136475-389.75958282 389.81136353a389.08642251 389.08642251 0 0 1-383.7011437-320.99370902 24.44088298 24.44088298 0 1 0-48.1568237 8.59573332 437.96818845 437.96818845 0 0 0 431.8579674 361.33152236c241.92331261 0 438.69312948-196.82159882 438.69312948-438.74491019 0-87.82147675-25.89076502-172.58784237-74.8243129-245.13376712"})]),e.createElementVNode("symbol",{id:"preview-image-refresh-right",viewBox:"0 0 1024 1024"},[e.createElementVNode("path",{d:"M924.39230934 564.14465897a24.3373191 24.3373191 0 0 0-28.37627972 19.78054519A389.08642251 389.08642251 0 0 1 512.2631052 904.91891318c-214.94513422 0-389.81136475-174.86622932-389.81136476-389.81136353a389.70780089 389.70780089 0 0 1 713.03168-217.94846342c12.63469394 18.69313305 23.76772267 38.68080355 32.98483557 59.3934151 5.48884268 12.32400475 19.88410785 17.91641008 32.25989333 12.32400475a24.02662992 24.02662992 0 0 0 12.22044088-12.42756741 24.07841185 24.07841185 0 0 0 3.5211449-11.90975169V200.37940505a24.49266369 24.49266369 0 0 0-48.93354666 0v58.46134754a437.86462459 437.86462459 0 0 0-719.14190105 11.13302994A436.51830518 436.51830518 0 0 0 73.56997572 515.10754965c0 241.92331261 196.82159882 438.69312948 438.69312948 438.69312947a437.96818845 437.96818845 0 0 0 431.90974813-361.27974164 24.49266369 24.49266369 0 0 0-19.78054399-28.37627851"})]),e.createElementVNode("symbol",{id:"preview-image-arrow-right",viewBox:"0 0 1024 1024"},[e.createElementVNode("path",{d:"M325.3196818 850.33221435c-9.66522217-9.66522217-10.23376465-24.62036133-1.58203125-33.81591797l290.82183838-290.84655761c12.48321533-11.84051513 12.43377685-14.93041992 1e-8-27.36419678L323.73765055 207.50842285C315.06119792 198.31286621 315.65445964 183.35772705 325.3196818 173.69250489c9.83825684-9.83825684 25.18890381-10.38208008 34.33502198-1.26068116l323.03100586 323.03100586c3.97979737 3.97979737 5.75958252 9.14611817 6.08093262 14.51019288l-1e-8 4.05395507c-0.34606934 5.36407471-2.1258545 10.53039551-6.08093261 14.51019287L359.65470378 851.59289551C350.50858561 860.6895752 335.1332194 860.14575195 325.3196818 850.33221435z"})])],-1);function H(t,l,i,u,s,m){return e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.createVNode(e.Transition,null,{default:e.withCtx(()=>[t.flag?(e.openBlock(),e.createElementBlock("div",{key:0,class:"owl-preview",style:e.normalizeStyle({"z-index":t.zIndex})},[e.createElementVNode("div",{class:"owl-preview-canvas",onMousewheel:l[3]||(l[3]=(...o)=>t.handleMousewheel&&t.handleMousewheel(...o)),onDOMMouseScroll:l[4]||(l[4]=(...o)=>t.handleMousewheel&&t.handleMousewheel(...o))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.uri,(o,d)=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:d},[t.active===d?(e.openBlock(),e.createElementBlock("div",{key:0,onMousemove:l[0]||(l[0]=(...a)=>t.handleMouseMove&&t.handleMouseMove(...a)),onMouseup:l[1]||(l[1]=(...a)=>t.mouseup&&t.mouseup(...a)),onMousedown:l[2]||(l[2]=(...a)=>t.mousedown&&t.mousedown(...a)),style:e.normalizeStyle([{transform:`rotate(${t.angle}deg) scale(${t.scale}) translate(${t.x}px,${t.y}px)`},{display:"inline-block"}])},[e.createElementVNode("img",{class:"owl-preview-image",src:o,alt:"\u88AB\u62D6\u62FD\u7684\u56FE\u7247",draggable:"false"},null,8,I)],36)):e.createCommentVNode("",!0)],64))),128))],32),e.createElementVNode("div",{class:"owl-preview-close",style:e.normalizeStyle({"z-index":t.zIndex+1}),onClick:l[5]||(l[5]=(...o)=>t.close&&t.close(...o))},L,4),t.uri&&t.uri.length>1?(e.openBlock(),e.createElementBlock("div",{key:0,class:"owl-preview-operate",style:e.normalizeStyle({"z-index":t.zIndex+1})},[e.createElementVNode("div",{class:"owl-preview-operate-item owl-preview-operate-item-left",onClick:l[6]||(l[6]=(...o)=>t.prev&&t.prev(...o))},A),e.createElementVNode("div",{class:"owl-preview-operate-item",onClick:l[7]||(l[7]=(...o)=>t.next&&t.next(...o))},O)],4)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"owl-preview-utils",style:e.normalizeStyle({"z-index":t.zIndex+1})},[(e.openBlock(),e.createElementBlock("svg",{viewBox:"0 0 1024 1024","aria-hidden":"true",class:"font-svg owl-preview-utils-item",onClick:l[8]||(l[8]=(...o)=>t.zoomOut&&t.zoomOut(...o))},$)),(e.openBlock(),e.createElementBlock("svg",{viewBox:"0 0 1024 1024","aria-hidden":"true",class:"font-svg owl-preview-utils-item",onClick:l[9]||(l[9]=(...o)=>t.enlarge&&t.enlarge(...o))},T)),e.createElementVNode("div",{class:"owl-preview-utils-item owl-preview-utils-scale",innerHTML:t.getCurrScale},null,8,R),(e.openBlock(),e.createElementBlock("svg",{viewBox:"0 0 1024 1024","aria-hidden":"true",class:"font-svg owl-preview-utils-item",onClick:l[10]||(l[10]=(...o)=>t.clockwiseRotation&&t.clockwiseRotation(...o))},j)),(e.openBlock(),e.createElementBlock("svg",{viewBox:"0 0 1024 1024","aria-hidden":"true",class:"font-svg owl-preview-utils-item",onClick:l[11]||(l[11]=(...o)=>t.anticlockwiseRotation&&t.anticlockwiseRotation(...o))},P))],4),_],4)):e.createCommentVNode("",!0)]),_:1})])}var V=S(F,[["render",H]]);const W=t=>{t.component(V.name,V)},D=V;c.FoxPreviewImage=D,c.default=W,Object.defineProperty(c,"__esModule",{value:!0}),c[Symbol.toStringTag]="Module"});
